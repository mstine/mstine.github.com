<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.46" />
  <meta name="author" content="Matt Stine">
  <meta name="description" content="Global CTO - Architecture">

  <link rel="stylesheet" href="/css/highlight.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  <link rel="alternate" href="https://www.mattstine.com/index.xml" type="application/rss+xml" title="Matt Stine">
  <link rel="feed" href="https://www.mattstine.com/index.xml" type="application/rss+xml" title="Matt Stine">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://www.mattstine.com/2009/06/09/javaone-2009-return-of-the-puzzlers-schlock-and-awe/">

  

  <title>javaone 2009 return of the puzzlers schlock and awe | Matt Stine</title>

</head>
<body id="top">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Matt Stine</a>
    </div>

    
    <div class="collapse navbar-collapse" id="#navbar-collapse-1">

      
      <ul class="nav navbar-nav navbar-right">
        
        <li class="nav-item"><a href="/#top">Home</a></li>
        
        <li class="nav-item"><a href="/#publications">Publications</a></li>
        
        <li class="nav-item"><a href="/#posts">Posts</a></li>
        
        <li class="nav-item"><a href="/#videos">Videos</a></li>
        
        <li class="nav-item"><a href="/#articles">Articles</a></li>
        
        <li class="nav-item"><a href="/#interviews">Interviews</a></li>
        
        <li class="nav-item"><a href="/#upcoming">Appearances</a></li>
        
        <li class="nav-item"><a href="/#contact">Contact</a></li>
        
      </ul>

    </div>
  </div>
</nav>

<div class="container">

  <article class="article" itemscope itemtype="http://schema.org/Article">

    

    <h1 itemprop="name">javaone 2009 return of the puzzlers schlock and awe</h1>

    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2009-06-09 00:00:00 &#43;0000 UTC" itemprop="datePublished">
      Tue, Jun 9, 2009
    </time>
  </span>

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.mattstine.com%2f2009%2f06%2f09%2fjavaone-2009-return-of-the-puzzlers-schlock-and-awe%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=javaone%202009%20return%20of%20the%20puzzlers%20schlock%20and%20awe&amp;url=https%3a%2f%2fwww.mattstine.com%2f2009%2f06%2f09%2fjavaone-2009-return-of-the-puzzlers-schlock-and-awe%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.mattstine.com%2f2009%2f06%2f09%2fjavaone-2009-return-of-the-puzzlers-schlock-and-awe%2f&amp;title=javaone%202009%20return%20of%20the%20puzzlers%20schlock%20and%20awe"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fwww.mattstine.com%2f2009%2f06%2f09%2fjavaone-2009-return-of-the-puzzlers-schlock-and-awe%2f&amp;title=javaone%202009%20return%20of%20the%20puzzlers%20schlock%20and%20awe"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=javaone%202009%20return%20of%20the%20puzzlers%20schlock%20and%20awe&amp;body=https%3a%2f%2fwww.mattstine.com%2f2009%2f06%2f09%2fjavaone-2009-return-of-the-puzzlers-schlock-and-awe%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


    <div class="article-style" itemprop="articleBody">
      <p>For several years now, Neal Gafter (Microsoft) and Joshua Block (Google), have made a habit of presenting various incarnations of this technical session, focused on what they call &ldquo;Java Puzzlers.&rdquo; Java Puzzlers are nothing more than short Java programs with curious behavior. It is a somewhat interactive session, with each puzzler&rsquo;s code listing followed by a four possible choices (A,B,C,D) to answer the question: &ldquo;What does it print?&rdquo; Neal and Joshua &ldquo;require&rdquo; that every attendee vote for their answer. After the vote, they reveal the correct answer and how to fix the problem. At the end of each problem presentation is the most important part, which is the Java programming principle that is illuminated by the puzzler. These are important tools to carry with you as you go forth a develop your Java code.</p>

<p>The following is a listing of the problem titles that were presented:</p>

<ol>
<li><p>Life&rsquo;s Persistent Questions</p></li>

<li><p>Instruments of Torture</p></li>

<li><p>Iterator Titillator</p></li>

<li><p>Searching for the One</p></li>

<li><p>Cogito Ergo Sum</p></li>

<li><p>Thread Friendly</p></li>

<li><p>When Words Collide</p></li>
</ol>

<p>I&rsquo;m going to spend my time focused on the last puzzler, as it was the one for which I was ABSOLUTELY CERTAIN that I knew the correct answer. Here&rsquo;s the code listing:</p>

<pre><code class="language-java">public class PrintWords {
  public static void main(String[] args) {
    System.out.println(
      Words.FIRST + &quot; &quot; + Words.SECOND + &quot; &quot; + Words.THIRD);
  }
}

public class Words { // Compile PrintWords against this version
  public static final String FIRST  = &quot;the&quot;;
  public static final String SECOND = null;
  public static final String THIRD  = &quot;set&quot;;
}

public class Words { // Run against this version
  public static final String FIRST  = &quot;physics&quot;;
  public static final String SECOND = &quot;chemistry&quot;;
  public static final String THIRD  = &quot;biology&quot;;
}
</code></pre>

<p>So here&rsquo;s the problem. We have two versions of class &ldquo;Words.&rdquo; We compile class &ldquo;PrintWords&rdquo; against the first version and we then run the class against the second version. What does it print out? I used my trusty &ldquo;seasoned Java programmer&rdquo; knowledge to assert that the program would print &ldquo;the null set.&rdquo; Why? Well, any seasoned Java programmer realizes that static final variables (or &ldquo;constant variables&rdquo; - what a curious concept) are inlined by the compiler. So it&rsquo;s quite obvious that &ldquo;the&rdquo; would be inlined wherever FIRST appears, null would be inlined wherever SECOND appears, and &ldquo;set&rdquo; would be inlined wherever THIRD appears.</p>

<p>Imagine my frustration when Josh and Neil announced that the program would in fact print &ldquo;the chemistry set.&rdquo; As it turns out, null cannot be inlined! It is not a constant variable. So when we run our Java program, the JVM smartly picks up the non-null value of SECOND that is is able to find in the new version of Words.</p>

<p>Simply because this one got me, I wanted to highlight it for my readers. The &ldquo;moral&rdquo; of this story is that only primitives and strings can be constant, and that null is not a constant. One should use a constant field ONLY if its value will NEVER change. For final fields whose value may change, they suggest the use of an ident() method:</p>

<pre><code class="language-java">// Returns its argument
private static String ident(String s) {
  return s;
}

// None of these fields are constant variables
public class Words {
  public static final String FIRST  = ident(&quot;the&quot;);
  public static final String SECOND = ident(null);
}
</code></pre>

<p>The compile will not inline the call to ident.</p>

<p>Want more? Pick up a copy of Neal and Josh&rsquo;s book, <em>Java Puzzlers: Traps, Pitfalls, and Corner Cases!</em></p>

    </div>

  </article>

  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://www.mattstine.com/2009/06/05/jug-usa-meeting-with-james-gosling-at-javaone/"><span
      aria-hidden="true">&larr;</span> jug usa meeting with james gosling at javaone</a></li>
    

    
    <li class="next"><a href="https://www.mattstine.com/2009/06/17/book-review-career-20-take-control-of-your-life/">book review career 20 take control of your life <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "seekingsimplicity" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>



</div>
<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 Matt Stine &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-8534802-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    

  </body>
</html>

